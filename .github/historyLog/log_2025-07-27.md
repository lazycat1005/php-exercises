# 工作日誌 - 2025-07-27

## 修復項目

### 閏年計算器 (27_calculating-leap-years)

**問題描述：**
閏年計算器無法正常運作，經檢查發現是 `LeapYearValidator.php` 的驗證方法返回值設計不一致所導致。

**問題原因：**

- `LeapYearController.php` 期望驗證器返回錯誤訊息字串（有錯誤時）或 null/false（無錯誤時）
- 但 `LeapYearValidator.php` 的 `validateYear` 方法返回 boolean 值，錯誤訊息存放在私有屬性中

**修復內容：**

1. 修改 `app/Validator/LeapYearValidator.php`：

   - 移除 `$errorMsg` 私有屬性和 `getErrorMsg()` 方法
   - 修改 `validateYear()` 方法，直接返回錯誤訊息字串或 null
   - 有錯誤時返回錯誤訊息字串，無錯誤時返回 null

2. 修改 `exercises/27_calculating-leap-years/version-php/index.php`：
   - 改善使用者體驗，讓結果區塊只在有計算結果時才顯示
   - 避免一進入頁面就顯示空的「結果:」標題

**修復後狀態：**

- 閏年計算器現在可以正常運作
- 輸入無效年份時會顯示適當的錯誤訊息
- 輸入有效年份時會正確計算並顯示結果

**測試確認：**
使用 PHP 內建伺服器進行本地測試，確認功能正常運作。

---

### 英文字母大小寫轉換 (19_english-letter-case)

**問題描述：**
題目要求輸入英文字串（而非單一字元），大小寫字母皆可，但結果應一律轉換為大寫並返回每個字元對應的 ASCII 碼。原有邏輯限制為單一字元輸入，不符合需求。

**修復內容：**

1. 修改 `exercises/19_english-letter-case/version-4/index.php`：

   - 移除 `maxlength="1"` 限制
   - 修改 pattern 為 `[A-Za-z]+` 支援多字元輸入
   - 更新顯示邏輯，列出每個字元的轉換結果和 ASCII 碼

2. 修改 `app/Validator/EnglishLettersValidator.php`：

   - 更新 `validateEnglishInput()` 方法支援字串驗證
   - 移除單一字元限制，改用 `/^[A-Za-z]+$/` 正則表達式

3. 修改 `app/Controller/EnglishLettersController.php`：
   - 更新 `analyzeAndConvertToUpper()` 方法處理整個字串
   - 返回每個字元的詳細資訊（字元、ASCII 碼）
   - 包含原始輸入、轉換結果、字串長度等資訊

**測試結果：** 功能正常運作，輸入字串如 "Hello" 會自動轉換為 "HELLO" 並顯示每個字元的 ASCII 碼。
